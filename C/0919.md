#define 文件 归档
# 第十章 文件输入输出  
## 文件基础概念  
1.文件的分类  
- 程序文件: *.c *.obj *.exe  
- 数据文件  

2.操作系统将各种设备统一作为文件处理。  
3.操作系统以文件为单位对数据进行管理  
4.输入输出被形容作“__流__”，即 __数据流__ 。  
5.C把文件看作一个字符（字节）的序列。C数据文件又一连串的字符组成，而不考虑行的界限，两行数据间不会自动加分隔符，对文件的存取是以字符为单位的。  
6.文件名  
    文件标识包括文件路径，文件名主干和文件后缀，一般称作文件名。__此时的文件名包含三部分内容，而不仅仅是文件名主干。__  
7.数据文件的分类：__ASCII文件__ 和 __二进制文件__。ASCII文件又称作 __文本文件__。  
8.文件缓冲区：程序修改文件时先写入缓冲区，装满后再写入文件。  
## 文件类型指针  
- 每个被使用的文件都在内存中开辟一个文件信息区，存放文件相关信息，如文件名，，状态，文件当前位置等，保存在一个名为FILE的结构体变量中的。里面的具体内容由编译环境提供的stdio.h决定。  
```C
FILE f1;//定义一个FILE类型的变量，名字为f1
FILE * fp;//定义一个指向FILE类型的指针，名字为fp。
//注意：此时fp并不指向数据文件的开头，而是指向文件信息区的开头。
```
## 打开与关闭文件  
- 打开文件：使用fopen()函数  
__fopen(文件名，使用文件方式）__
```C
FILE * fp;
fopen("a1","r");//以"r"（只读）的方式打开名为a1的文件
//这样fp就和a1联系起来了
```  
- 常用以下的方法打开一个文件：
```C
if( (fp == fopen("file1","r"))==NULL ){
    printf("fatal error:cannot open!");
    exit(0);//关闭所有文件并终止程序
}
```  
- 关闭文件：使用fclose()函数  
```C
FILE * fp;
fclose(fp);//使指针fp不再指向文件
```  
__！！在程序终止前关闭文件（将文件缓冲区的内容写到文件里），否则可能会出现数据丢失的问题。__  
## 文件的读写  
- 向文件读写字符  
```C
fgetc(fp);//从fp指向的文件中读取一个字符。若成功，则返回值是读入的字符；否则返回EOF(-1)
fputc(ch,fp);//将ch写入到fp指向的文件中。若成功，返回值是输出的字符；否则是EOF(-1)
```
实际运用
```C
#include <stdio.h>
int main ()
{
    FILE *fp;//创建一个名为fp的文件指针
    int i;
    char ch = 'A';
    fp = fopen("file.txt", "w");
    for(i=0;i<1000;i++){
        fputc(ch,fp);//将ch的内容写入文件"file.txt"
    }
    fclose(fp);//关闭文件，并将改动写入
    return 0;
}
```